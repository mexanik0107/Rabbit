
--- –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ò–ò ---

–†–û–õ–¨ –ò–ò: –û–ø—ã—Ç–Ω—ã–π C# —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–≥—Ä –Ω–∞ Unity.
  - –í —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–µ –≤–ª–∞–¥–µ–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ SOLID, –û–û–ü –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, ECS, –ø–∞—Ç—Ç–µ—Ä–Ω –ö–æ–º–ø–æ–Ω–µ–Ω—Ç).
  - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: —Ñ–∏–∑–∏–∫–∞, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (–æ—Å–æ–±–µ–Ω–Ω–æ —Å–ª–æ–∂–Ω—ã–µ, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ —É–∑–ª–∞—Ö/—Ñ–∏–∑–∏–∫–µ), –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞.
  - –¶–µ–ª—å: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω—ã–π, —á–∏—Å—Ç—ã–π –∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π C# –∫–æ–¥, –æ–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –¥–∞–≤–∞—Ç—å —Å–æ–≤–µ—Ç—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –ø–æ–º–æ–≥–∞—Ç—å –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–µ–π–º–¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏—Ö –∏–¥–µ–π.

–†–û–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: –ù–∞—á–∏–Ω–∞—é—â–∏–π –≥–µ–π–º–¥–∏–∑–∞–π–Ω–µ—Ä.
  - –ó–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏, –ø–æ—á–µ–º—É –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏–º–µ–Ω–Ω–æ —Ç–∞–∫, –∏ –∫–∞–∫ –º–æ–∏ –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.
  - –¶–µ–ª—å: –ü–æ–ª—É—á–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–¥—É –∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ª—É—á—à–∏–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏.

–ü–†–ê–í–ò–õ–ê –û–¢–í–ï–¢–ê –ò–ò:
1. –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –æ–ø—ã—Ç–Ω–æ–≥–æ C# —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –∞–¥–∞–ø—Ç–∏—Ä—É—è —Å–ª–æ–∂–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ –≥–µ–π–º–¥–∏–∑–∞–π–Ω–µ—Ä–∞.
2. –ü—Ä–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ, —Å—Å—ã–ª–∞–π—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ SlimeCharacterController –Ω–∞—Ä—É—à–∞–µ—Ç SRP, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –ö–æ–º–ø–æ–Ω–µ–Ω—Ç").
3. –£–∫–∞–∑—ã–≤–∞–π, –≤ –∫–∞–∫–æ–º —Ñ–∞–π–ª–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–ª–µ–¥—É–µ—Ç –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
4. –ü—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–∫—Ä–∏–ø—Ç, –ø–∏—à–∏ –∏–∑–º–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—É—é —á–∞—Å—Ç—å.

--- –ö–û–ù–ï–¶ –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –ò–ò ---

--- START OF FILE all_cs_files.txt ---

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Editor\AudioDashboard.cs
================================================================================

using UnityEngine;
using UnityEditor;

// –≠—Ç–æ—Ç –∫–ª–∞—Å—Å —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –≤ Unity
public class AudioDashboard : EditorWindow
{
    // –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–µ—Ñ–∞–±—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –±—É–¥–µ–º —Ç—è–Ω—É—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    private GameObject _playerPrefab;
    private GameObject _enemyPrefab;

    // –°–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è –æ–∫–Ω–∞, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±—É–¥–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ
    private Vector2 _scrollPos;

    // –ü—É–Ω–∫—Ç –º–µ–Ω—é, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ
    [MenuItem("Tools/Audio Dashboard üéß")]
    public static void ShowWindow()
    {
        GetWindow<AudioDashboard>("Audio Config");
    }

    void OnGUI()
    {
        // –ö—Ä–∞—Å–∏–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
        GUILayout.Label("–¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤—É–∫–æ–º", EditorStyles.boldLabel);
        EditorGUILayout.Space();

        // –ü–æ–ª—è –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –ø—Ä–µ—Ñ–∞–±–æ–≤
        GUILayout.Label("1. –ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞ —Å–≤–æ–∏ –ø—Ä–µ—Ñ–∞–±—ã (–∏–∑ –ø–∞–ø–∫–∏ Project):", EditorStyles.helpBox);
        _playerPrefab = (GameObject)EditorGUILayout.ObjectField("Player Prefab", _playerPrefab, typeof(GameObject), false);
        _enemyPrefab = (GameObject)EditorGUILayout.ObjectField("Enemy Prefab", _enemyPrefab, typeof(GameObject), false);

        EditorGUILayout.Space();
        GUILayout.Label("2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–æ–≤:", EditorStyles.boldLabel);

        // –ù–∞—á–∞–ª–æ –∑–æ–Ω—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
        _scrollPos = EditorGUILayout.BeginScrollView(_scrollPos);

        if (_playerPrefab != null)
        {
            DrawPlayerAudioSettings();
        }
        else
        {
            EditorGUILayout.HelpBox("–ù–∞–∑–Ω–∞—á—å Player Prefab, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –µ–≥–æ –∑–≤—É–∫–∏.", MessageType.Info);
        }

        EditorGUILayout.Space();
        DrawLine();
        EditorGUILayout.Space();

        if (_enemyPrefab != null)
        {
            DrawEnemyAudioSettings();
        }
        else
        {
            EditorGUILayout.HelpBox("–ù–∞–∑–Ω–∞—á—å Enemy Prefab, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –µ–≥–æ –∑–≤—É–∫–∏.", MessageType.Info);
        }

        EditorGUILayout.EndScrollView();
    }

    private void DrawPlayerAudioSettings()
    {
        GUILayout.Label($"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ò–≥—Ä–æ–∫–∞ ({_playerPrefab.name})", EditorStyles.boldLabel);

        // --- –ë–ª–æ–∫ 1: PlayerController (–®–∞–≥–∏) ---
        var playerController = _playerPrefab.GetComponent<PlayerController>();
        if (playerController != null)
        {
            // –°–æ–∑–¥–∞–µ–º "–æ–±–µ—Ä—Ç–∫—É" SerializedObject, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Ctrl+Z)
            SerializedObject so = new SerializedObject(playerController);
            so.Update(); // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ

            EditorGUILayout.LabelField("–î–≤–∏–∂–µ–Ω–∏–µ (PlayerController)", EditorStyles.miniBoldLabel);

            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
            EditorGUILayout.PropertyField(so.FindProperty("footstepSounds"), new GUIContent("–ó–≤—É–∫–∏ —à–∞–≥–æ–≤"), true);
            EditorGUILayout.PropertyField(so.FindProperty("stepInterval"), new GUIContent("–ò–Ω—Ç–µ—Ä–≤–∞–ª —à–∞–≥–∞ (—Å–µ–∫)"));

            so.ApplyModifiedProperties(); // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        }

        EditorGUILayout.Space();

        // --- –ë–ª–æ–∫ 2: PlayerCuteness (–ì–µ–π–º–ø–ª–µ–π) ---
        var playerCuteness = _playerPrefab.GetComponent<PlayerCuteness>();
        if (playerCuteness != null)
        {
            SerializedObject so = new SerializedObject(playerCuteness);
            so.Update();

            EditorGUILayout.LabelField("–ú–∏–ª–æ—Ç–∞ / –ì–µ–π–º–ø–ª–µ–π (PlayerCuteness)", EditorStyles.miniBoldLabel);

            EditorGUILayout.PropertyField(so.FindProperty("damageSound"), new GUIContent("–ó–≤—É–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –º–∏–ª–æ—Ç—ã"));
            EditorGUILayout.PropertyField(so.FindProperty("restoreSound"), new GUIContent("–ó–≤—É–∫ —É–±–∏–π—Å—Ç–≤–∞ –≤—Ä–∞–≥–∞"));
            EditorGUILayout.PropertyField(so.FindProperty("gameOverSound"), new GUIContent("–ó–≤—É–∫ Game Over"));

            so.ApplyModifiedProperties();
        }
    }

    private void DrawEnemyAudioSettings()
    {
        GUILayout.Label($"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –í—Ä–∞–≥–∞ ({_enemyPrefab.name})", EditorStyles.boldLabel);

        // --- –ë–ª–æ–∫ 1: EnemyAI (–ê—Ç–∞–∫–∞) ---
        var enemyAI = _enemyPrefab.GetComponent<EnemyAI>();
        if (enemyAI != null)
        {
            SerializedObject so = new SerializedObject(enemyAI);
            so.Update();

            EditorGUILayout.LabelField("–ë–æ–π (EnemyAI)", EditorStyles.miniBoldLabel);
            EditorGUILayout.PropertyField(so.FindProperty("attackSound"), new GUIContent("–ó–≤—É–∫ –ê—Ç–∞–∫–∏"));

            so.ApplyModifiedProperties();
        }

        EditorGUILayout.Space();

        // --- –ë–ª–æ–∫ 2: EnemyHealth (–ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ä–æ–Ω–∞) ---
        var enemyHealth = _enemyPrefab.GetComponent<EnemyHealth>();
        if (enemyHealth != null)
        {
            SerializedObject so = new SerializedObject(enemyHealth);
            so.Update();

            EditorGUILayout.LabelField("–ó–¥–æ—Ä–æ–≤—å–µ (EnemyHealth)", EditorStyles.miniBoldLabel);
            EditorGUILayout.PropertyField(so.FindProperty("hitSound"), new GUIContent("–ó–≤—É–∫ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞"));
            EditorGUILayout.PropertyField(so.FindProperty("deathSound"), new GUIContent("–ó–≤—É–∫ —Å–º–µ—Ä—Ç–∏"));

            so.ApplyModifiedProperties();
        }
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏
    private void DrawLine()
    {
        Rect rect = EditorGUILayout.GetControlRect(false, 1);
        rect.height = 1;
        EditorGUI.DrawRect(rect, new Color(0.5f, 0.5f, 0.5f, 1));
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\AmmoPickup.cs
================================================================================

using UnityEngine;

[RequireComponent(typeof(Collider2D))]
public class AmmoPickup : MonoBehaviour
{
    [Tooltip("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤ –≤ —ç—Ç–æ–π –∫–æ—Ä–æ–±–∫–µ")]
    public int ammoAmount = 10;

    [Tooltip("–ó–≤—É–∫ –ø–æ–¥–±–æ—Ä–∞")]
    public AudioClip pickupSound;

    private void OnTriggerEnter2D(Collider2D collision)
    {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –Ω–∞—Å –≤–æ—à–µ–ª –∏–º–µ–Ω–Ω–æ –ò–≥—Ä–æ–∫
        if (collision.CompareTag("Player"))
        {
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–µ–ª—å–±—ã
            PlayerShooting shooting = collision.GetComponent<PlayerShooting>();

            if (shooting != null)
            {
                shooting.AddAmmo(ammoAmount);

                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ (—á–µ—Ä–µ–∑ AudioSource.PlayClipAtPoint, —Ç.–∫. –æ–±—ä–µ–∫—Ç —Å–µ–π—á–∞—Å —É–Ω–∏—á—Ç–æ–∂–∏—Ç—Å—è)
                if (pickupSound != null)
                {
                    AudioSource.PlayClipAtPoint(pickupSound, transform.position);
                }

                Destroy(gameObject);
            }
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\Camera.cs
================================================================================

using UnityEngine;

public class CameraFollow : MonoBehaviour
{
    [Header("Target")]
    public Transform player;       // –°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä–æ–∫–∞

    [Header("Settings")]
    public float smoothSpeed = 5f; // –ù–∞—Å–∫–æ–ª—å–∫–æ –ø–ª–∞–≤–Ω–æ –∫–∞–º–µ—Ä–∞ –¥–æ–≥–æ–Ω—è–µ—Ç –∏–≥—Ä–æ–∫–∞ (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º —Ä–µ–∑—á–µ)

    [Header("Limits")]
    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥—Ä–∞–Ω–∏—Ü, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ —Ü–µ–Ω—Ç—Ä –∫–∞–º–µ—Ä—ã –Ω–µ –º–æ–∂–µ—Ç –≤—ã–µ—Ö–∞—Ç—å
    public Vector2 minPosition;    // –õ–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª
    public Vector2 maxPosition;    // –ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª

    void LateUpdate()
    {
        if (player == null) return;

        // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫—É–¥–∞ –∫–∞–º–µ—Ä–∞ –•–û–ß–ï–¢ –ø–æ–ø–∞—Å—Ç—å (–ø–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞ + —Å–æ—Ö—Ä–∞–Ω—è–µ–º Z –∫–∞–º–µ—Ä—ã)
        Vector3 targetPosition = new Vector3(player.position.x, player.position.y, transform.position.z);

        // 2. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —ç—Ç—É –ø–æ–∑–∏—Ü–∏—é —Ä–∞–º–∫–∞–º–∏ (Clamp)
        targetPosition.x = Mathf.Clamp(targetPosition.x, minPosition.x, maxPosition.x);
        targetPosition.y = Mathf.Clamp(targetPosition.y, minPosition.y, maxPosition.y);

        // 3. –ü–ª–∞–≤–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–µ–º –∫–∞–º–µ—Ä—É –∫ —ç—Ç–æ–π —Ç–æ—á–∫–µ
        transform.position = Vector3.Lerp(transform.position, targetPosition, smoothSpeed * Time.deltaTime);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\DynamicMusicManager.cs
================================================================================

using UnityEngine;
using System.Collections;
using UnityEngine.Audio; // –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –¥–ª—è –º–∏–∫—à–µ—Ä–∞

public class DynamicMusicManager : MonoBehaviour
{
    [Header("Audio Mixing")]
    // –°—é–¥–∞ –ø–µ—Ä–µ—Ç–∞—â–∏ –≥—Ä—É–ø–ø—É "Music" –∏–∑ —Ç–≤–æ–µ–≥–æ Audio Mixer
    public AudioMixerGroup musicOutputGroup;

    [Header("Target")]
    public PlayerCuteness playerCuteness;

    [Header("Thresholds (Hysteresis)")]
    [Tooltip("–ï—Å–ª–∏ –º–∏–ª–æ—Ç–∞ –í–´–®–ï —ç—Ç–æ–≥–æ —á–∏—Å–ª–∞ -> –≤–∫–ª—é—á–∞–µ–º –ú–∏–ª—É—é –º—É–∑—ã–∫—É")]
    public float switchToCuteThreshold = 60f;

    [Tooltip("–ï—Å–ª–∏ –º–∏–ª–æ—Ç–∞ –ù–ò–ñ–ï —ç—Ç–æ–≥–æ —á–∏—Å–ª–∞ -> –≤–∫–ª—é—á–∞–µ–º –ì—Ä—É–±—É—é –º—É–∑—ã–∫—É")]
    public float switchToRoughThreshold = 40f;

    [Header("Transition")]
    [Tooltip("–°–∫–æ—Ä–æ—Å—Ç—å –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ (—Å–µ–∫)")]
    public float fadeDuration = 2.0f;
    [Range(0f, 1f)] public float maxVolume = 0.5f;

    [Header("Music Library")]
    public AudioClip[] roughTracks; // –ì—Ä—É–±–∞—è –º—É–∑—ã–∫–∞ (–¥–ª—è –Ω–∏–∑–∫–æ–π –º–∏–ª–æ—Ç—ã)
    public AudioClip[] cuteTracks;  // –ú–∏–ª–∞—è –º—É–∑—ã–∫–∞ (–¥–ª—è –≤—ã—Å–æ–∫–æ–π –º–∏–ª–æ—Ç—ã)

    // –î–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–≤—É–∫–∞ –¥–ª—è –∫—Ä–æ—Å—Å—Ñ–µ–π–¥–∞ (–ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–µ–∫–∞–Ω–∏—è)
    private AudioSource _sourceRough;
    private AudioSource _sourceCute;

    // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: true = –∏–≥—Ä–∞–µ—Ç –º–∏–ª–∞—è, false = –∏–≥—Ä–∞–µ—Ç –≥—Ä—É–±–∞—è
    private bool _isPlayingCute;

    // –ß—Ç–æ–±—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–Ω–æ–≥–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
    private Coroutine _fadeCoroutine;

    void Start()
    {
        // 1. –ï—Å–ª–∏ –∏–≥—Ä–æ–∫–∞ –Ω–µ –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –≤—Ä—É—á–Ω—É—é, –∏—â–µ–º –Ω–∞ —Å—Ü–µ–Ω–µ
        if (playerCuteness == null)
            playerCuteness = FindObjectOfType<PlayerCuteness>();

        // 2. –°–æ–∑–¥–∞–µ–º –¥–≤–∞ AudioSource –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
        _sourceRough = CreateSource("AudioSource_Rough");
        _sourceCute = CreateSource("AudioSource_Cute");

        // 3. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        if (playerCuteness != null)
        {
            float currentVal = playerCuteness.CurrentCuteness;
            _isPlayingCute = currentVal > switchToCuteThreshold;
        }
        else
        {
            _isPlayingCute = false;
        }

        // 4. –ó–∞–ø—É—Å–∫–∞–µ–º —Ç—Ä–µ–∫–∏
        PlayRandomTrack(_sourceRough, roughTracks);
        PlayRandomTrack(_sourceCute, cuteTracks);

        // 5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≥—Ä–æ–º–∫–æ—Å—Ç—å
        if (_isPlayingCute)
        {
            _sourceCute.volume = maxVolume;
            _sourceRough.volume = 0f;
        }
        else
        {
            _sourceCute.volume = 0f;
            _sourceRough.volume = maxVolume;
        }
    }

    void Update()
    {
        if (playerCuteness == null) return;

        float currentCuteness = playerCuteness.CurrentCuteness;

        // --- –õ–û–ì–ò–ö–ê –ì–ò–°–¢–ï–†–ï–ó–ò–°–ê ---
        if (!_isPlayingCute && currentCuteness > switchToCuteThreshold)
        {
            SwitchToCute();
        }
        else if (_isPlayingCute && currentCuteness < switchToRoughThreshold)
        {
            SwitchToRough();
        }

        CheckAndLoop(_sourceRough, roughTracks);
        CheckAndLoop(_sourceCute, cuteTracks);
    }

    private void SwitchToCute()
    {
        _isPlayingCute = true;
        if (_fadeCoroutine != null) StopCoroutine(_fadeCoroutine);
        _fadeCoroutine = StartCoroutine(Crossfade(_sourceCute, _sourceRough));
    }

    private void SwitchToRough()
    {
        _isPlayingCute = false;
        if (_fadeCoroutine != null) StopCoroutine(_fadeCoroutine);
        _fadeCoroutine = StartCoroutine(Crossfade(_sourceRough, _sourceCute));
    }

    private IEnumerator Crossfade(AudioSource toOn, AudioSource toOff)
    {
        float timer = 0f;
        float startVolOn = toOn.volume;
        float startVolOff = toOff.volume;

        while (timer < fadeDuration)
        {
            timer += Time.deltaTime;
            float t = timer / fadeDuration;

            toOn.volume = Mathf.Lerp(startVolOn, maxVolume, t);
            toOff.volume = Mathf.Lerp(startVolOff, 0f, t);

            yield return null;
        }

        toOn.volume = maxVolume;
        toOff.volume = 0f;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ AudioSource "–Ω–∞ –ª–µ—Ç—É"
    private AudioSource CreateSource(string goName)
    {
        GameObject go = new GameObject(goName);
        go.transform.SetParent(this.transform);
        AudioSource src = go.AddComponent<AudioSource>();

        // --- –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–î–ï–°–¨ ---
        // –ù–∞–∑–Ω–∞—á–∞–µ–º Output –≥—Ä—É–ø–ø—É –º–∏–∫—à–µ—Ä–∞, –µ—Å–ª–∏ –æ–Ω–∞ –∑–∞–¥–∞–Ω–∞ –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ
        if (musicOutputGroup != null)
        {
            src.outputAudioMixerGroup = musicOutputGroup;
        }
        // -------------------------

        src.loop = false;
        src.playOnAwake = false;
        return src;
    }

    private void PlayRandomTrack(AudioSource source, AudioClip[] clips)
    {
        if (clips.Length == 0) return;
        AudioClip clip = clips[Random.Range(0, clips.Length)];
        source.clip = clip;
        source.Play();
    }

    private void CheckAndLoop(AudioSource source, AudioClip[] clips)
    {
        if (!source.isPlaying && Time.timeScale > 0)
        {
            PlayRandomTrack(source, clips);
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\EnemyAI.cs
================================================================================

using UnityEngine;
using System.Collections;
using Mono.Cecil.Cil;
[RequireComponent(typeof(Rigidbody2D))]
[RequireComponent(typeof(AudioSource))]
[RequireComponent(typeof(SpriteRenderer))]
public class EnemyAI : MonoBehaviour
{
    [Header("Targeting")]
    public Transform player;
    public bool findPlayerAutomatically = true;
    [Header("Jump Movement Settings")]
    public float jumpSpeed = 6f;
    public float jumpDuration = 0.6f;
    public float jumpInterval = 1f;
    public AnimationCurve jumpScaleCurve = new AnimationCurve(new Keyframe(0, 0), new Keyframe(0.5f, 0.5f), new Keyframe(1, 0));

    [Header("Visuals & Animation")]
    [Tooltip("–û–±—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∞–∑–º–µ—Ä–∞ –∫—Ä–æ–ª–∏–∫–∞. 1 = –∫–∞–∫ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ, 0.5 = –ø–æ–ª–æ–≤–∏–Ω–∞.")]
    [Range(0.1f, 3f)]
    public float sizeMultiplier = 1.0f;

    [Tooltip("–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ (–∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)")]
    public float animationFps = 10f;

    public Sprite[] idleSprites;
    public Sprite[] jumpSprites;

    [Header("Movement Stats")]
    public float rotationSpeed = 10f;

    [Header("Combat Stats")]
    public float attackRange = 1.5f;
    public float attackCooldown = 1f;
    public float cutenessDamage = 10f;

    [Header("Audio")]
    public AudioClip attackSound;
    public AudioClip jumpSound;

    private Rigidbody2D _rb;
    private AudioSource _audioSource;
    private SpriteRenderer _spriteRenderer;

    private float _lastAttackTime;

    // –•—Ä–∞–Ω–∏–º —Ä–∞–∑–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —É –æ–±—ä–µ–∫—Ç–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (Scale 1,1,1 –∏–ª–∏ –¥—Ä—É–≥–æ–π)
    private Vector3 _baseEditorScale;
    private bool _isJumping = false;

    void Awake()
    {
        _rb = GetComponent<Rigidbody2D>();
        _audioSource = GetComponent<AudioSource>();
        _spriteRenderer = GetComponent<SpriteRenderer>();

        // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π Scale –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–æ–±—ã—á–Ω–æ —ç—Ç–æ 1,1,1)
        _baseEditorScale = transform.localScale;
    }

    void Start()
    {
        if (findPlayerAutomatically && player == null)
        {
            GameObject playerObj = GameObject.FindGameObjectWithTag("Player");
            if (playerObj != null)
            {
                player = playerObj.transform;
            }
        }

        StartCoroutine(RabbitBehaviorRoutine());
        StartCoroutine(AnimationRoutine());
    }

    void Update()
    {
        HandleAttackLogic();
    }

    // --- –õ–æ–≥–∏–∫–∞ –ê–Ω–∏–º–∞—Ü–∏–∏ –°–ø—Ä–∞–π—Ç–æ–≤ ---

    private IEnumerator AnimationRoutine()
    {
        int frameIndex = 0;
        float timer = 0f;

        while (true)
        {
            Sprite[] currentClips = _isJumping ? jumpSprites : idleSprites;

            if (currentClips != null && currentClips.Length > 0)
            {
                float frameDuration = 1f / animationFps;
                timer += Time.deltaTime;

                if (timer >= frameDuration)
                {
                    timer = 0f;
                    frameIndex++;

                    if (frameIndex >= currentClips.Length)
                        frameIndex = 0;

                    _spriteRenderer.sprite = currentClips[frameIndex];
                }
            }
            yield return null;
        }
    }

    // --- –õ–æ–≥–∏–∫–∞ –ê—Ç–∞–∫–∏ ---

    private void HandleAttackLogic()
    {
        if (player == null) return;

        float distanceToPlayer = Vector2.Distance(transform.position, player.position);

        if (distanceToPlayer <= attackRange)
        {
            if (Time.time >= _lastAttackTime + attackCooldown)
            {
                PerformAttack();
            }
        }
    }

    private void PerformAttack()
    {
        _lastAttackTime = Time.time;

        if (attackSound != null) _audioSource.PlayOneShot(attackSound);

        if (player != null)
        {
            PlayerCuteness playerCuteness = player.GetComponent<PlayerCuteness>();
            if (playerCuteness != null)
            {
                playerCuteness.AddCuteness(cutenessDamage);
                Debug.Log($"{name} —Å–¥–µ–ª–∞–ª –∫—É—Å—å!");
            }
        }
    }

    // --- –õ–æ–≥–∏–∫–∞ –î–≤–∏–∂–µ–Ω–∏—è –∏ –ú–∞—Å—à—Ç–∞–±–∞ ---

    private IEnumerator RabbitBehaviorRoutine()
    {
        yield return new WaitForSeconds(Random.Range(0f, 1f));

        while (true)
        {
            // 1. IDLE (–°—Ç–æ–∏–º)
            _isJumping = false;

            float timer = 0f;
            while (timer < jumpInterval)
            {
                RotateTowardsPlayer();

                // –í —Ñ–∞–∑–µ –ø–æ–∫–æ—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä
                // –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å sizeMultiplier –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ –∏ —Å—Ä–∞–∑—É –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                transform.localScale = GetCurrentTargetSize();

                timer += Time.deltaTime;
                yield return null;
            }

            // 2. JUMP (–ü—Ä—ã–≥–∞–µ–º)
            if (player != null)
            {
                yield return StartCoroutine(PerformJump());
            }
        }
    }

    private IEnumerator PerformJump()
    {
        _isJumping = true;

        Vector2 jumpDirection = (player.position - transform.position).normalized;

        if (jumpSound != null) _audioSource.PlayOneShot(jumpSound);

        float timeElapsed = 0f;

        // –§–∏–∫—Å–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥ –ø—Ä—ã–∂–∫–æ–º, —á—Ç–æ–±—ã –æ–Ω –Ω–µ —Å–∫–∞–∫–∞–ª, –µ—Å–ª–∏ –º—ã –∫—Ä—É—Ç–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        Vector3 startJumpSize = GetCurrentTargetSize();

        while (timeElapsed < jumpDuration)
        {
            timeElapsed += Time.deltaTime;
            float t = timeElapsed / jumpDuration;

            // –î–≤–∏–∂–µ–Ω–∏–µ
            _rb.MovePosition(_rb.position + jumpDirection * jumpSpeed * Time.fixedDeltaTime);

            // –≠—Ñ—Ñ–µ–∫—Ç –º–∞—Å—à—Ç–∞–±–∞: –ë–∞–∑–æ–≤—ã–π –†–∞–∑–º–µ—Ä * (1 + –ó–Ω–∞—á–µ–Ω–∏–µ–ö—Ä–∏–≤–æ–π)
            // –ï—Å–ª–∏ –∫—Ä–∏–≤–∞—è –¥–∞–µ—Ç 0.5, —Ç–æ —Ä–∞–∑–º–µ—Ä –±—É–¥–µ—Ç 1.5 –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ
            float curveValue = jumpScaleCurve.Evaluate(t);
            transform.localScale = startJumpSize * (1f + curveValue);

            yield return new WaitForFixedUpdate();
        }

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ—á–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ –∫–æ–Ω—Ü–µ
        transform.localScale = GetCurrentTargetSize();
        _isJumping = false;
    }

    private void RotateTowardsPlayer()
    {
        if (player == null) return;

        Vector2 direction = player.position - transform.position;
        float angle = Mathf.Atan2(direction.y, direction.x) * Mathf.Rad2Deg - 90f;
        Quaternion targetRotation = Quaternion.Euler(0, 0, angle);
        transform.rotation = Quaternion.Lerp(transform.rotation, targetRotation, rotationSpeed * Time.deltaTime);
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
    private Vector3 GetCurrentTargetSize()
    {
        return _baseEditorScale * sizeMultiplier;
    }

    void OnDrawGizmosSelected()
    {
        Gizmos.color = Color.red;
        Gizmos.DrawWireSphere(transform.position, attackRange);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\EnemyHealth.cs
================================================================================

using UnityEngine;
using System;

[RequireComponent(typeof(AudioSource))]
public class EnemyHealth : MonoBehaviour
{
    [Header("Settings")]
    public float maxHealth = 10f;

    [Header("Audio")]
    public AudioClip hitSound;
    public AudioClip deathSound;

    public static event Action<float> OnEnemyDied;

    private float _currentHealth;
    private AudioSource _audioSource;

    void Awake()
    {
        _audioSource = GetComponent<AudioSource>();
    }

    void OnEnable()
    {
        _currentHealth = maxHealth;
    }

    public void TakeDamage(float damage)
    {
        _currentHealth -= damage;

        if (hitSound != null)
        {
            _audioSource.PlayOneShot(hitSound);
        }

        if (_currentHealth <= 0)
        {
            Die();
        }
    }

    private void Die()
    {
        // --- –ù–û–í–û–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ª—É—Ç ---
        // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç LootDropper –Ω–∞ —ç—Ç–æ–º –∂–µ –≤—Ä–∞–≥–µ
        // –ï—Å–ª–∏ –æ–Ω –µ—Å—Ç—å, –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ TryDropLoot()
        if (TryGetComponent(out LootDropper looter))
        {
            looter.TryDropLoot();
        }
        // ------------------------------

        OnEnemyDied?.Invoke(5f);

        if (deathSound != null)
        {
            AudioSource.PlayClipAtPoint(deathSound, transform.position);
        }

        Destroy(gameObject);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\LootDropper.cs
================================================================================

using UnityEngine;

public class LootDropper : MonoBehaviour
{
    [Header("Loot Settings")]
    public GameObject ammoPickupPrefab; // –ü—Ä–µ—Ñ–∞–± –∫–æ—Ä–æ–±–∫–∏ —Å –ø–∞—Ç—Ä–æ–Ω–∞–º–∏

    [Range(0f, 1f)]
    public float dropChance = 0.3f; // –®–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è (0.3 = 30%)

    public int minAmmo = 5;
    public int maxAmmo = 15;

    // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –º—ã –≤—ã–∑–æ–≤–µ–º –∏–∑ EnemyHealth –ø–µ—Ä–µ–¥ —Å–º–µ—Ä—Ç—å—é
    public void TryDropLoot()
    {
        if (ammoPickupPrefab == null) return;

        // –ë—Ä–æ—Å–∞–µ–º –∫—É–±–∏–∫ (–æ—Ç 0.0 –¥–æ 1.0)
        float roll = Random.value;

        if (roll <= dropChance)
        {
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª-–≤–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤
            int amount = Random.Range(minAmmo, maxAmmo + 1);

            // –°–æ–∑–¥–∞–µ–º –∫–æ—Ä–æ–±–∫—É –Ω–∞ –º–µ—Å—Ç–µ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞
            GameObject loot = Instantiate(ammoPickupPrefab, transform.position, Quaternion.identity);

            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ—Ä–æ–±–∫—É (–ø–µ—Ä–µ–¥–∞–µ–º –≤ –Ω–µ–µ –∫–æ–ª-–≤–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤)
            AmmoPickup pickupScript = loot.GetComponent<AmmoPickup>();
            if (pickupScript != null)
            {
                pickupScript.ammoAmount = amount;
            }
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\MainMenuMusic.cs
================================================================================

using UnityEngine;
using UnityEngine.Audio; // –ù—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∏–∫—à–µ—Ä–æ–º

[RequireComponent(typeof(AudioSource))]
public class MainMenuMusic : MonoBehaviour
{
    [Header("Settings")]
    [Tooltip("–°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è")]
    public AudioClip[] playlist;

    [Header("Audio Mixing")]
    [Tooltip("–ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞ –≥—Ä—É–ø–ø—É 'Music' –∏–∑ Audio Mixer")]
    public AudioMixerGroup musicOutputGroup;

    private AudioSource _audioSource;
    private int _lastTrackIndex = -1;

    void Awake()
    {
        _audioSource = GetComponent<AudioSource>();

        // –°—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º AudioSource
        _audioSource.playOnAwake = false;
        _audioSource.loop = false; // –ú—ã –±—É–¥–µ–º –º–µ–Ω—è—Ç—å —Ç—Ä–µ–∫–∏ —Å–∞–º–∏, –ø–æ—ç—Ç–æ–º—É –∞–≤—Ç–æ-–ø–æ–≤—Ç–æ—Ä –≤—ã–∫–ª—é—á–∞–µ–º

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º –≥—Ä—É–ø–ø—É –º–∏–∫—à–µ—Ä–∞, –µ—Å–ª–∏ –æ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ
        if (musicOutputGroup != null)
        {
            _audioSource.outputAudioMixerGroup = musicOutputGroup;
        }
    }

    void Start()
    {
        PlayRandomTrack();
    }

    void Update()
    {
        // –ï—Å–ª–∏ –º—É–∑—ã–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å (–∏ –∏–≥—Ä–∞ –Ω–µ –Ω–∞ –ø–∞—É–∑–µ), –≤–∫–ª—é—á–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é
        if (!_audioSource.isPlaying)
        {
            PlayRandomTrack();
        }
    }

    private void PlayRandomTrack()
    {
        if (playlist == null || playlist.Length == 0) return;

        int newIndex;

        // –ï—Å–ª–∏ —É –Ω–∞—Å –±–æ–ª—å—à–µ 1 —Ç—Ä–µ–∫–∞, —Å—Ç–∞—Ä–∞–µ–º—Å—è –Ω–µ –∏–≥—Ä–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥
        if (playlist.Length > 1)
        {
            do
            {
                newIndex = Random.Range(0, playlist.Length);
            }
            while (newIndex == _lastTrackIndex);
        }
        else
        {
            newIndex = 0;
        }

        _lastTrackIndex = newIndex;

        _audioSource.clip = playlist[newIndex];
        _audioSource.Play();
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\MinimapFollow.cs
================================================================================

using UnityEngine;

public class MinimapFollow : MonoBehaviour
{
    public Transform player; // –ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞ –∏–≥—Ä–æ–∫–∞

    // –ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –º–∏–Ω–∏–∫–∞—Ä—Ç–∞ –≤—Ä–∞—â–∞–ª–∞—Å—å –≤–º–µ—Å—Ç–µ —Å –∏–≥—Ä–æ–∫–æ–º, –ø–æ—Å—Ç–∞–≤—å true
    public bool rotateWithPlayer = false;

    void LateUpdate()
    {
        if (player == null) return;

        // –°–ª–µ–¥–∏–º –∑–∞ –ø–æ–∑–∏—Ü–∏–µ–π –∏–≥—Ä–æ–∫–∞, –Ω–æ –≤—ã—Å–æ—Ç—É (z) –æ—Å—Ç–∞–≤–ª—è–µ–º —Å–≤–æ—é (-10 –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É)
        Vector3 newPosition = player.position;
        newPosition.z = transform.position.z;
        transform.position = newPosition;

        if (rotateWithPlayer)
        {
            // –í—Ä–∞—â–∞–µ–º –∫–∞–º–µ—Ä—É —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏–≥—Ä–æ–∫–∞ (–≤–æ–∫—Ä—É–≥ –æ—Å–∏ Z)
            transform.rotation = Quaternion.Euler(0, 0, player.eulerAngles.z);
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\PlayerController.cs
================================================================================

using UnityEngine;
using UnityEngine.InputSystem;

// –î–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ null reference
[RequireComponent(typeof(AudioSource))]
public class PlayerController : MonoBehaviour
{
    [Header("Settings")]
    public float moveSpeed = 10f;

    [Header("Audio Settings")]
    public AudioClip[] footstepSounds; // –ú–∞—Å—Å–∏–≤ –∑–≤—É–∫–æ–≤ –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
    public float stepInterval = 0.5f;  // –ö–∞–∫ —á–∞—Å—Ç–æ –∏–≥—Ä–∞—Ç—å –∑–≤—É–∫ (—á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º —á–∞—â–µ)

    [Header("References")]
    public Camera cam;
    public Rigidbody2D rb;

    private Vector2 movement;
    private Vector2 mousePos;
    private AudioSource _audioSource;
    private float _stepTimer;

    [HideInInspector] public float speedMultiplier = 1f;

    void Awake()
    {
        // –ö—ç—à–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        _audioSource = GetComponent<AudioSource>();
    }

    void Update()
    {
        // 1. –°—á–∏—Ç—ã–≤–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
        movement = Vector2.zero;
        if (Keyboard.current != null)
        {
            if (Keyboard.current.wKey.isPressed) movement.y += 1;
            if (Keyboard.current.sKey.isPressed) movement.y -= 1;
            if (Keyboard.current.aKey.isPressed) movement.x -= 1;
            if (Keyboard.current.dKey.isPressed) movement.x += 1;
        }

        movement = movement.normalized;

        // 2. –°—á–∏—Ç—ã–≤–∞–µ–º –º—ã—à—å
        if (Mouse.current != null)
        {
            mousePos = cam.ScreenToWorldPoint(Mouse.current.position.ReadValue());
        }

        // 3. –õ–æ–≥–∏–∫–∞ –∑–≤—É–∫–∞ —à–∞–≥–æ–≤
        HandleFootsteps();
    }

    void FixedUpdate()
    {
        float currentSpeed = moveSpeed * speedMultiplier;
        rb.MovePosition(rb.position + movement * currentSpeed * Time.fixedDeltaTime);

        Vector2 lookDir = mousePos - rb.position;
        float angle = Mathf.Atan2(lookDir.y, lookDir.x) * Mathf.Rad2Deg - 90f;
        rb.rotation = angle;
    }

    private void HandleFootsteps()
    {
        // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –¥–≤–∏–≥–∞–µ—Ç—Å—è (–≤–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –Ω–µ —Ä–∞–≤–µ–Ω –Ω—É–ª—é)
        if (movement.sqrMagnitude > 0.1f)
        {
            _stepTimer -= Time.deltaTime;

            if (_stepTimer <= 0)
            {
                PlayRandomFootstep();
                _stepTimer = stepInterval; // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
            }
        }
        else
        {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä, —á—Ç–æ–±—ã –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –¥–≤–∏–∂–µ–Ω–∏—è –∑–≤—É–∫ –±—ã–ª —Å—Ä–∞–∑—É
            _stepTimer = 0;
        }
    }

    private void PlayRandomFootstep()
    {
        if (footstepSounds.Length == 0) return;

        // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∑–≤—É–∫ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
        int index = Random.Range(0, footstepSounds.Length);

        // –ò–∑–º–µ–Ω—è–µ–º –≤—ã—Å–æ—Ç—É —Ç–æ–Ω–∞ (pitch) –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã –∑–≤—É–∫–∏ –Ω–µ –∫–∞–∑–∞–ª–∏—Å—å —Ä–æ–±–æ—Ç–æ–ø–æ–¥–æ–±–Ω—ã–º–∏
        _audioSource.pitch = Random.Range(0.9f, 1.1f);
        _audioSource.PlayOneShot(footstepSounds[index]);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\PlayerCuteness.cs
================================================================================

using UnityEngine;

[RequireComponent(typeof(AudioSource))]
public class PlayerCuteness : MonoBehaviour
{
    [Header("Settings")]
    public float maxCuteness = 100f;
    public float startCuteness = 0f;

    [Header("Combat Balance")]
    [Tooltip("–ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ (–æ—Ç –º–∞–∫—Å–∏–º—É–º–∞) —Å–Ω–∏–∂–∞–µ—Ç—Å—è –º–∏–ª–æ—Ç–∞ –ø—Ä–∏ —É–±–∏–π—Å—Ç–≤–µ –≤—Ä–∞–≥–∞")]
    [Range(0f, 100f)]
    public float killReductionPercent = 10f; // –ù–∞–ø—Ä–∏–º–µ—Ä, 10% –∑–∞ –≤—Ä–∞–≥–∞

    [Header("References")]
    public HUD hud;

    [Header("Audio")]
    public AudioClip hitSound;
    public AudioClip healSound; // –ó–≤—É–∫ —Å–Ω–∏–∂–µ–Ω–∏—è –º–∏–ª–æ—Ç—ã (–æ–±–ª–µ–≥—á–µ–Ω–∏—è)
    public AudioClip gameOverSound;

    private float _currentCuteness;
    private AudioSource _audioSource;
    private bool _isDead = false;

    // –ü—É–±–ª–∏—á–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
    public float CurrentCuteness => _currentCuteness;

    void Awake()
    {
        _audioSource = GetComponent<AudioSource>();
        if (hud == null) hud = FindObjectOfType<HUD>();
    }

    // --- –ü–û–î–ü–ò–°–ö–ê –ù–ê –°–û–ë–´–¢–ò–Ø ---
    // –ú—ã —Å–ª—É—à–∞–µ–º "—Ä–∞–¥–∏–æ—ç—Ñ–∏—Ä" –∏–≥—Ä—ã. –ï—Å–ª–∏ –≥–¥–µ-—Ç–æ –∫—Ä–∏–∫–Ω—É–ª–∏ "–í—Ä–∞–≥ —É–º–µ—Ä", –º—ã —Ä–µ–∞–≥–∏—Ä—É–µ–º.

    void OnEnable()
    {
        EnemyHealth.OnEnemyDied += HandleEnemyDeath;
    }

    void OnDisable()
    {
        EnemyHealth.OnEnemyDied -= HandleEnemyDeath;
    }
    // ---------------------------

    void Start()
    {
        _currentCuteness = startCuteness;
        if (hud != null) hud.Initialize(maxCuteness, _currentCuteness);
    }

    void Update()
    {
        // –£–î–ê–õ–ï–ù–û: –ü–∞—Å—Å–∏–≤–Ω–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ (AddCuteness(passiveGain...))
        // –¢–µ–ø–µ—Ä—å –º–∏–ª–æ—Ç–∞ —Å–∞–º–∞ –ø–æ —Å–µ–±–µ –ù–ï —Ä–∞—Å—Ç–µ—Ç.
    }

    // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ —É–º–∏—Ä–∞–µ—Ç –ª—é–±–æ–π –≤—Ä–∞–≥
    private void HandleEnemyDeath(float points)
    {
        if (_isDead) return;

        // –°—á–∏—Ç–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –ú–ê–ö–°–ò–ú–£–ú–ê. 
        // –ï—Å–ª–∏ maxCuteness = 100, –∞ killReductionPercent = 10, —Ç–æ —Å–Ω–∏–º–∞–µ–º 10 –µ–¥.
        float reductionAmount = maxCuteness * (killReductionPercent / 100f);

        RemoveCuteness(reductionAmount);
    }

    public void AddCuteness(float amount, bool playSound = true)
    {
        if (_isDead) return;

        _currentCuteness += amount;

        if (playSound && amount > 1f && hitSound != null)
            _audioSource.PlayOneShot(hitSound);

        UpdateHUD();

        if (_currentCuteness >= maxCuteness)
        {
            Die();
        }
    }

    public void RemoveCuteness(float amount)
    {
        if (_isDead) return;

        // –ï—Å–ª–∏ –º–∏–ª–æ—Ç–∞ –±—ã–ª–∞ 0, –∏ –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–Ω—è—Ç—å –µ—â–µ, –∑–≤—É–∫ –∏–≥—Ä–∞—Ç—å –Ω–µ –Ω–∞–¥–æ
        bool wasAlreadySafe = _currentCuteness <= 0.01f;

        _currentCuteness -= amount;
        if (_currentCuteness < 0) _currentCuteness = 0;

        // –ò–≥—Ä–∞–µ–º –∑–≤—É–∫ "–∏—Å—Ü–µ–ª–µ–Ω–∏—è" (—Å–Ω–∏–∂–µ–Ω–∏—è –º–∏–ª–æ—Ç—ã), —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ —á—Ç–æ-—Ç–æ —Å–Ω–∏–∑–∏–ª–æ—Å—å
        if (!wasAlreadySafe && amount > 0 && healSound != null)
            _audioSource.PlayOneShot(healSound);

        UpdateHUD();
    }

    private void UpdateHUD()
    {
        if (hud != null) hud.UpdateCuteness(_currentCuteness);
    }

    private void Die()
    {
        _isDead = true;
        Debug.Log("Game Over: Too Cute!");

        if (gameOverSound != null)
            AudioSource.PlayClipAtPoint(gameOverSound, transform.position);

        if (GameManager.Instance != null)
        {
            GameManager.Instance.GameOver();
        }
        else
        {
            UnityEngine.SceneManagement.SceneManager.LoadScene(UnityEngine.SceneManagement.SceneManager.GetActiveScene().name);
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\PlayerShooting.cs
================================================================================

using UnityEngine;
using UnityEngine.InputSystem;
using System.Collections;

public class PlayerShooting : MonoBehaviour
{
    [Header("References")]
    public GameObject bulletPrefab;
    public Transform firePoint;
    public HUD hud; // –°—Å—ã–ª–∫–∞ –Ω–∞ HUD

    [Header("Weapon Stats")]
    public float damage = 2f;
    public float bulletSpeed = 20f;
    public float fireRate = 0.2f;
    public float spreadAngle = 5f;

    [Header("Ammo Settings")]
    public int maxMagazineSize = 10;
    public int maxTotalAmmo = 60;
    public int startTotalAmmo = 30;
    public float reloadTime = 1.5f;

    [Header("Audio")]
    public AudioClip shootSound;
    public AudioClip reloadSound;
    public AudioClip emptyClickSound;
    private AudioSource _audioSource;

    public int CurrentClip { get; private set; }
    public int CurrentTotalAmmo { get; private set; }
    public bool IsReloading { get; private set; }

    private float _nextFireTime = 0f;

    void Awake()
    {
        _audioSource = GetComponent<AudioSource>();
        if (_audioSource == null) _audioSource = gameObject.AddComponent<AudioSource>();

        // –ï—Å–ª–∏ HUD –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ, –∏—â–µ–º –µ–≥–æ —Å–∞–º–∏
        if (hud == null) hud = FindObjectOfType<HUD>();
    }

    void Start()
    {
        CurrentClip = maxMagazineSize;
        CurrentTotalAmmo = startTotalAmmo;

        UpdateAmmoUI(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    }

    void Update()
    {
        if (IsReloading) return;

        // –ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞ (R)
        if (Keyboard.current != null && Keyboard.current.rKey.wasPressedThisFrame)
        {
            StartReload();
            return;
        }

        // –°—Ç—Ä–µ–ª—å–±–∞ (–õ–ö–ú)
        if (Mouse.current != null && Mouse.current.leftButton.isPressed)
        {
            if (Time.time >= _nextFireTime)
            {
                TryShoot();
                _nextFireTime = Time.time + fireRate;
            }
        }
    }

    private void TryShoot()
    {
        if (CurrentClip <= 0)
        {
            if (CurrentTotalAmmo > 0) StartReload();
            else PlaySound(emptyClickSound);
            return;
        }

        Shoot();
    }

    private void Shoot()
    {
        if (bulletPrefab == null || firePoint == null) return;

        float randomSpread = Random.Range(-spreadAngle, spreadAngle);
        Quaternion spreadRotation = Quaternion.Euler(0, 0, randomSpread);
        Quaternion finalRotation = firePoint.rotation * spreadRotation;

        GameObject bulletObj = Instantiate(bulletPrefab, firePoint.position, finalRotation);

        Projectile projectile = bulletObj.GetComponent<Projectile>();
        if (projectile != null)
        {
            projectile.speed = bulletSpeed;
            projectile.damage = damage;
        }

        CurrentClip--;
        UpdateAmmoUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ—Å–ª–µ –≤—ã—Å—Ç—Ä–µ–ª–∞

        PlaySound(shootSound, randomizePitch: true);
    }

    public void StartReload()
    {
        if (IsReloading) return;
        if (CurrentClip == maxMagazineSize) return;
        if (CurrentTotalAmmo <= 0) return;

        StartCoroutine(ReloadRoutine());
    }

    private IEnumerator ReloadRoutine()
    {
        IsReloading = true;

        // –¢—É—Ç –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω —Ç–µ–∫—Å—Ç "Reloading...", –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        PlaySound(reloadSound);

        yield return new WaitForSeconds(reloadTime);

        int ammoNeeded = maxMagazineSize - CurrentClip;
        int ammoToReload = Mathf.Min(ammoNeeded, CurrentTotalAmmo);

        CurrentClip += ammoToReload;
        CurrentTotalAmmo -= ammoToReload;

        IsReloading = false;
        UpdateAmmoUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏
    }

    public void AddAmmo(int amount)
    {
        CurrentTotalAmmo += amount;
        if (CurrentTotalAmmo > maxTotalAmmo)
        {
            CurrentTotalAmmo = maxTotalAmmo;
        }

        UpdateAmmoUI(); // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø—Ä–∏ –ø–æ–¥–±–æ—Ä–µ

        if (CurrentClip == 0)
        {
            StartReload();
        }
    }

    private void UpdateAmmoUI()
    {
        if (hud != null)
        {
            hud.UpdateAmmo(CurrentClip, CurrentTotalAmmo);
        }
    }

    private void PlaySound(AudioClip clip, bool randomizePitch = false)
    {
        if (clip != null && _audioSource != null)
        {
            _audioSource.pitch = randomizePitch ? Random.Range(0.9f, 1.1f) : 1f;
            _audioSource.PlayOneShot(clip);
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\Projectile.cs
================================================================================

using UnityEngine;

[RequireComponent(typeof(Rigidbody2D))]
[RequireComponent(typeof(Collider2D))]
public class Projectile : MonoBehaviour
{
    [HideInInspector] public float speed;   // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
    [HideInInspector] public float damage;  // ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ

    private Rigidbody2D _rb;
    private float _lifetime = 5f; // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ: ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩ 5 ÔøΩÔøΩÔøΩ, ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩ ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ

    void Awake()
    {
        _rb = GetComponent<Rigidbody2D>();
    }

    void Start()
    {
        // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ "ÔøΩÔøΩÔøΩÔøΩÔøΩ" ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩ
        // (ÔøΩ 2D "ÔøΩÔøΩÔøΩÔøΩ" ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ)
        _rb.linearVelocity = transform.up * speed;

        // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩ, ÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩ
        Destroy(gameObject, _lifetime);
    }

    void OnTriggerEnter2D(Collider2D collision)
    {
        // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ, ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩ ÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ (ÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ EnemyHealth)
        EnemyHealth enemy = collision.GetComponent<EnemyHealth>();

        if (enemy != null)
        {
            enemy.TakeDamage(damage);
            Destroy(gameObject); // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ
        }
        else if (!collision.CompareTag("Player") && !collision.isTrigger)
        {
            // ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩ, ÔøΩÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩ (ÔøΩÔøΩ ÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ ÔøΩ ÔøΩÔøΩ ÔøΩ ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ)
            Destroy(gameObject);
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\WaveManager.cs
================================================================================

using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using System.Linq;

public class WaveManager : MonoBehaviour
{
    [Header("Spawn Settings")]
    public List<Transform> allSpawnPoints;
    public int activeSpawnersCount = 3;
    public bool randomizeSpawnersEveryWave = true;

    [Header("Wave Progression")]
    public float countMultiplier = 1.2f;
    public float timeBetweenWaves = 5f;
    public float spawnRate = 1f;

    [Header("Enemies Configuration")]
    public List<EnemyWaveConfig> enemyConfigs;

    private int _currentWaveIndex = 0;
    private int _enemiesAlive = 0;
    private bool _isSpawning = false;
    private bool _waitingForNextWave = false;
    private List<Transform> _currentWaveSpawners;
    private HUD _hud;

    void Start()
    {
        _hud = FindObjectOfType<HUD>();

        if (allSpawnPoints == null || allSpawnPoints.Count == 0)
        {
            enabled = false;
            return;
        }

        StartCoroutine(StartNextWave());
    }

    void OnEnable()
    {
        EnemyHealth.OnEnemyDied += OnEnemyKilled;
    }

    void OnDisable()
    {
        EnemyHealth.OnEnemyDied -= OnEnemyKilled;
    }

    private void OnEnemyKilled(float unusedFloat)
    {
        if (_enemiesAlive > 0) _enemiesAlive--;

        if (_enemiesAlive <= 0 && !_isSpawning && !_waitingForNextWave)
        {
            EndWave();
        }
    }

    private void EndWave()
    {
        if (GameManager.Instance != null)
        {
            GameManager.Instance.OnWaveCompleted(_currentWaveIndex);
        }
        StartCoroutine(StartNextWave());
    }

    private IEnumerator StartNextWave()
    {
        _waitingForNextWave = true;

        // --- –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê –¢–ê–ô–ú–ï–†–ê –û–ë–†–ê–¢–ù–û–ì–û –û–¢–°–ß–ï–¢–ê ---
        float timer = timeBetweenWaves;

        while (timer > 0)
        {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ HUD (–Ω–∞–ø—Ä–∏–º–µ—Ä: "NEXT WAVE: 3...")
            if (_hud != null)
            {
                _hud.UpdateWaveText($"NEXT: {Mathf.CeilToInt(timer)}");
            }

            timer -= Time.deltaTime;
            yield return null; // –ñ–¥–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä
        }
        // -----------------------------------------------

        _waitingForNextWave = false;
        _currentWaveIndex++;

        if (GameManager.Instance != null)
        {
            GameManager.Instance.OnWaveStarted(_currentWaveIndex);
        }

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–æ–ª–Ω—ã
        if (_hud != null)
        {
            _hud.UpdateWaveText($"WAVE {_currentWaveIndex}");
        }

        StartCoroutine(SpawnWaveRoutine());
    }

    private IEnumerator SpawnWaveRoutine()
    {
        _isSpawning = true;
        SelectActiveSpawners();
        List<GameObject> spawnQueue = GenerateSpawnQueue();
        _enemiesAlive = spawnQueue.Count;

        foreach (GameObject enemyPrefab in spawnQueue)
        {
            Transform spawnPoint = GetRandomActiveSpawner();
            if (spawnPoint != null)
            {
                Instantiate(enemyPrefab, spawnPoint.position, Quaternion.identity);
            }
            yield return new WaitForSeconds(spawnRate);
        }

        _isSpawning = false;
    }

    private void SelectActiveSpawners()
    {
        if (!randomizeSpawnersEveryWave || activeSpawnersCount <= 0 || activeSpawnersCount >= allSpawnPoints.Count)
        {
            _currentWaveSpawners = new List<Transform>(allSpawnPoints);
        }
        else
        {
            _currentWaveSpawners = allSpawnPoints.OrderBy(x => Random.value).Take(activeSpawnersCount).ToList();
        }
    }

    private List<GameObject> GenerateSpawnQueue()
    {
        List<GameObject> queue = new List<GameObject>();
        float currentMultiplier = Mathf.Pow(countMultiplier, _currentWaveIndex - 1);

        foreach (var config in enemyConfigs)
        {
            int countToSpawn = Mathf.RoundToInt(config.baseCount * currentMultiplier);
            for (int i = 0; i < countToSpawn; i++) queue.Add(config.enemyPrefab);
        }

        for (int i = 0; i < queue.Count; i++)
        {
            GameObject temp = queue[i];
            int randomIndex = Random.Range(i, queue.Count);
            queue[i] = queue[randomIndex];
            queue[randomIndex] = temp;
        }

        return queue;
    }

    private Transform GetRandomActiveSpawner()
    {
        if (_currentWaveSpawners.Count == 0) return null;
        return _currentWaveSpawners[Random.Range(0, _currentWaveSpawners.Count)];
    }
}

[System.Serializable]
public class EnemyWaveConfig
{
    public string name = "Enemy Type";
    public GameObject enemyPrefab;
    public int baseCount = 5;
}   

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\WorldItemSpawner.cs
================================================================================

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class WorldItemSpawner : MonoBehaviour
{
    [Header("–ß—Ç–æ —Å–ø–∞–≤–Ω–∏–º")]
    public GameObject itemPrefab; // –ü—Ä–µ—Ñ–∞–± –∫–æ—Ä–æ–±–∫–∏ —Å –ø–∞—Ç—Ä–æ–Ω–∞–º–∏ (AmmoPickup)

    [Header("–ì–¥–µ —Å–ø–∞–≤–Ω–∏–º")]
    [Tooltip("–°–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫, –≥–¥–µ –º–æ–≥—É—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–µ–¥–º–µ—Ç—ã. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å —Å—é–¥–∞ —Ç–µ –∂–µ —Ç–æ—á–∫–∏, —á—Ç–æ –∏ –≤ WaveManager.")]
    public List<Transform> spawnPoints;

    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏")]
    public float minSpawnInterval = 10f; // –ú–∏–Ω. –≤—Ä–µ–º—è –º–µ–∂–¥—É —Å–ø–∞–≤–Ω–∞–º–∏
    public float maxSpawnInterval = 20f; // –ú–∞–∫—Å. –≤—Ä–µ–º—è

    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞")]
    [Tooltip("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–æ–±–æ–∫, –ª–µ–∂–∞—â–∏—Ö –Ω–∞ –∫–∞—Ä—Ç–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ß—Ç–æ–±—ã –Ω–µ –∑–∞–º—É—Å–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å.")]
    public int maxItemsOnMap = 5;

    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª—É—Ç–∞")]
    public int minAmmoInBox = 5;
    public int maxAmmoInBox = 15;

    // –°–ø–∏—Å–æ–∫ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–æ–±–æ–∫
    private List<GameObject> _spawnedItems = new List<GameObject>();

    void Start()
    {
        if (spawnPoints == null || spawnPoints.Count == 0)
        {
            Debug.LogWarning("WorldItemSpawner: –ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ—á–∫–∏ —Å–ø–∞–≤–Ω–∞!");
            enabled = false;
            return;
        }

        if (itemPrefab == null)
        {
            Debug.LogWarning("WorldItemSpawner: –ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω –ø—Ä–µ—Ñ–∞–± –ø—Ä–µ–¥–º–µ—Ç–∞!");
            enabled = false;
            return;
        }

        StartCoroutine(SpawnRoutine());
    }

    private IEnumerator SpawnRoutine()
    {
        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º —Å–ø–∞–≤–Ω–æ–º
        yield return new WaitForSeconds(Random.Range(minSpawnInterval, maxSpawnInterval));

        while (true)
        {
            // 1. –û—á–∏—Å—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ (—É–¥–∞–ª—è–µ–º –∏–∑ –Ω–µ–≥–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ—Ä–æ–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–≥—Ä–æ–∫ —É–∂–µ –ø–æ–¥–æ–±—Ä–∞–ª)
            // RemoveAll –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç: –µ—Å–ª–∏ –æ–Ω null (—É–Ω–∏—á—Ç–æ–∂–µ–Ω), —É–¥–∞–ª—è–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞.
            _spawnedItems.RemoveAll(item => item == null);

            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
            if (_spawnedItems.Count < maxItemsOnMap)
            {
                SpawnItem();
            }

            // 3. –ñ–¥–µ–º –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑–∞
            float waitTime = Random.Range(minSpawnInterval, maxSpawnInterval);
            yield return new WaitForSeconds(waitTime);
        }
    }

    private void SpawnItem()
    {
        // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ç–æ—á–∫—É
        Transform randomPoint = spawnPoints[Random.Range(0, spawnPoints.Count)];

        // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥–º–µ—Ç
        GameObject newItem = Instantiate(itemPrefab, randomPoint.position, Quaternion.identity);

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤ –≤–Ω—É—Ç—Ä–∏
        AmmoPickup pickupScript = newItem.GetComponent<AmmoPickup>();
        if (pickupScript != null)
        {
            pickupScript.ammoAmount = Random.Range(minAmmoInBox, maxAmmoInBox + 1);
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
        _spawnedItems.Add(newItem);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\GameManager.cs
================================================================================

using UnityEngine;

public class GameManager : MonoBehaviour
{
    public static GameManager Instance { get; private set; }

    [Header("Game State")]
    public float totalSurvivalTime;
    public int currentScore;
    public int wavesSurvived;

    [Header("Score Settings")]
    public int baseScorePerWave = 100;
    public float timeBonusCoefficient = 2000f;

    // --- –ù–û–í–û–ï: –ü—É–±–ª–∏—á–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è ---
    public bool IsGameActive => _isGameActive;
    // -----------------------------------------------------

    private bool _isGameActive = true;
    private float _waveStartTime;
    private HUD _hud;

    void Awake()
    {
        if (Instance == null) Instance = this;
        else Destroy(gameObject);

        _hud = FindObjectOfType<HUD>();
    }

    void Start()
    {
        currentScore = 0;
        totalSurvivalTime = 0;
        wavesSurvived = 0;
        _waveStartTime = Time.time;
    }

    void Update()
    {
        if (_isGameActive)
        {
            totalSurvivalTime += Time.deltaTime;

            if (_hud != null)
            {
                _hud.UpdateGameTimer(totalSurvivalTime);
            }
        }
    }

    public void OnWaveStarted(int waveIndex)
    {
        _waveStartTime = Time.time;
    }

    public void OnWaveCompleted(int waveIndex)
    {
        wavesSurvived = waveIndex;
        float waveDuration = Time.time - _waveStartTime;
        waveDuration = Mathf.Max(waveDuration, 1f);

        int wavePoints = waveIndex * baseScorePerWave;
        int timeBonus = Mathf.RoundToInt(timeBonusCoefficient / waveDuration);
        currentScore += wavePoints + timeBonus;
    }

    public void GameOver()
    {
        if (!_isGameActive) return;

        _isGameActive = false;

        GameOverMenu gameOverMenu = FindObjectOfType<GameOverMenu>(true);
        if (gameOverMenu != null)
        {
            gameOverMenu.Show(currentScore, totalSurvivalTime, wavesSurvived);
        }

        Time.timeScale = 0f;
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\GameOverMenu.cs
================================================================================

using UnityEngine;
using UnityEngine.UI;
using TMPro;
using UnityEngine.SceneManagement;

public class GameOverMenu : MonoBehaviour
{
    [Header("UI References")]
    public CanvasGroup panelGroup;

    [Header("Stats Texts")]
    public TMP_Text scoreText;
    public TMP_Text timeText;
    public TMP_Text waveText;

    [Header("Buttons")]
    public Button restartButton;
    public Button exitButton;

    private const string MENU_SCENE_NAME = "MenuScene";

    void Start()
    {
        if (restartButton != null) restartButton.onClick.AddListener(RestartGame);
        if (exitButton != null) exitButton.onClick.AddListener(ExitGame);

        Hide();
    }

    // --- –ù–û–í–û–ï: –°–ª—É—à–∞–µ–º –∫–Ω–æ–ø–∫—É ESC ---
    void Update()
    {
        // –ï—Å–ª–∏ –º–µ–Ω—é –Ω–µ–≤–∏–¥–∏–º–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
        if (!gameObject.activeSelf) return;

        if (Input.GetKeyDown(KeyCode.Escape))
        {
            ExitGame();
        }
    }
    // ---------------------------------

    public void Show(int score, float timePlayed, int waves)
    {
        gameObject.SetActive(true);
        if (panelGroup != null)
        {
            panelGroup.alpha = 1;
            panelGroup.interactable = true;
            panelGroup.blocksRaycasts = true;
        }

        if (scoreText != null) scoreText.text = $"{score}";
        if (timeText != null) timeText.text = $"{FormatTime(timePlayed)}";
        if (waveText != null) waveText.text = $"{waves}";
    }

    private void Hide()
    {
        gameObject.SetActive(false);
    }

    private void RestartGame()
    {
        Time.timeScale = 1f;
        string currentScene = SceneManager.GetActiveScene().name;

        if (SceneLoader.Instance != null) SceneLoader.Instance.LoadScene(currentScene);
        else SceneManager.LoadScene(currentScene);
    }

    private void ExitGame()
    {
        Time.timeScale = 1f;
        if (SceneLoader.Instance != null) SceneLoader.Instance.LoadScene(MENU_SCENE_NAME);
        else SceneManager.LoadScene(MENU_SCENE_NAME);
    }

    private string FormatTime(float timeInSeconds)
    {
        int minutes = Mathf.FloorToInt(timeInSeconds / 60F);
        int seconds = Mathf.FloorToInt(timeInSeconds - minutes * 60);
        return string.Format("{0:00}:{1:00}", minutes, seconds);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\HUD.cs
================================================================================

using UnityEngine;
using UnityEngine.UI;
using TMPro;

public class HUD : MonoBehaviour
{
    [Header("Cuteness Bar")]
    public Slider cutenessSlider;
    public Image cutenessFill;
    public Gradient cutenessGradient;

    [Header("Ammo Info")]
    public TMP_Text currentAmmoText;
    public TMP_Text totalAmmoText;

    [Header("Game Info")]
    public TMP_Text waveText;       // –°—é–¥–∞ –±—É–¥–µ—Ç –ø–∏—Å–∞—Ç—å—Å—è "WAVE 1" –∏–ª–∏ "NEXT: 5..."
    public TMP_Text gameTimerText;  // –ù–û–í–û–ï: –°—é–¥–∞ –ø–µ—Ä–µ—Ç–∞—â–∏ —Ç–µ–∫—Å—Ç –æ–±—â–µ–≥–æ —Ç–∞–π–º–µ—Ä–∞

    [Header("Visual Darkening")]
    public Gradient interfaceGradient;
    public Image[] allHudImages;
    public TMP_Text[] allHudTexts;

    private float _maxCuteness;

    public void Initialize(float maxCutenessValue, float currentCutenessValue)
    {
        _maxCuteness = maxCutenessValue;
        if (cutenessSlider != null)
        {
            cutenessSlider.maxValue = _maxCuteness;
            cutenessSlider.value = currentCutenessValue;
        }
        UpdateCutenessVisuals(currentCutenessValue);
    }

    public void UpdateCuteness(float currentCuteness)
    {
        if (cutenessSlider != null) cutenessSlider.value = currentCuteness;
        UpdateCutenessVisuals(currentCuteness);
    }

    private void UpdateCutenessVisuals(float currentVal)
    {
        float percentage = Mathf.Clamp01(currentVal / _maxCuteness);

        // 1. –ü–æ–ª–æ—Å–∫–∞ (–ø–æ–ª–Ω—ã–π —Ü–≤–µ—Ç)
        if (cutenessFill != null) cutenessFill.color = cutenessGradient.Evaluate(percentage);

        // 2. –¶–≤–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        Color targetColor = interfaceGradient.Evaluate(percentage);

        // –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∫—Ä–∞—Å–∏–º –∫–∞–∫ –æ–±—ã—á–Ω–æ
        if (allHudImages != null)
        {
            foreach (var img in allHudImages)
            {
                if (img != null && img != cutenessFill) img.color = targetColor;
            }
        }

        // –¢–ï–ö–°–¢: –ö—Ä–∞—Å–∏–º —Ç–æ–ª—å–∫–æ –õ–ò–¶–ï–í–£–Æ —á–∞—Å—Ç—å (faceColor), —á—Ç–æ–±—ã –ê—É—Ç–ª–∞–π–Ω –æ—Å—Ç–∞–ª—Å—è —á–µ—Ä–Ω—ã–º!
        if (allHudTexts != null)
        {
            foreach (var txt in allHudTexts)
            {
                if (txt != null)
                {
                    // faceColor –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Color32, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ
                    txt.faceColor = targetColor;
                }
            }
        }
    }

    // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ ---

    public void UpdateAmmo(int clip, int total)
    {
        if (currentAmmoText != null) currentAmmoText.text = clip.ToString();
        if (totalAmmoText != null) totalAmmoText.text = total.ToString();
    }

    public void UpdateWaveText(string text)
    {
        if (waveText != null) waveText.text = text;
    }

    public void UpdateGameTimer(float timeInSeconds)
    {
        if (gameTimerText != null)
        {
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –≤ –ú–ú:–°–°
            int minutes = Mathf.FloorToInt(timeInSeconds / 60F);
            int seconds = Mathf.FloorToInt(timeInSeconds - minutes * 60);
            gameTimerText.text = string.Format("{0:00}:{1:00}", minutes, seconds);
        }
    }
}   

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\MainMenu.cs
================================================================================

using UnityEngine;
using UnityEngine.UI;
using UnityEngine.SceneManagement;

public class MainMenu : MonoBehaviour
{
    [Header("–°—Å—ã–ª–∫–∏ –Ω–∞ UI")]
    public CanvasGroup mainMenuPanel;
    public Button playButton;
    public Button settingsButton;
    public Button exitButton;

    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏")]
    public SettingsMenu settingsMenu;

    private const string GAME_SCENE_NAME = "GameScene";

    private void Start()
    {
        InitializeButtons();
        Show();
        if (settingsMenu != null) settingsMenu.gameObject.SetActive(false);
    }

    // --- –ù–û–í–û–ï: –û–±—Ä–∞–±–æ—Ç–∫–∞ ESC –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é ---
    private void Update()
    {
        if (Input.GetKeyDown(KeyCode.Escape))
        {
            // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -> –Ω–∞–∂–∏–º–∞–µ–º Back
            if (settingsMenu != null && settingsMenu.gameObject.activeSelf)
            {
                settingsMenu.CloseSettings();
            }
            // –ò–Ω–∞—á–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -> –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ–∫–Ω–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∏–≥—Ä—ã, –Ω–æ –æ–±—ã—á–Ω–æ –≤ –º–µ–Ω—é ESC –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç
        }
    }
    // -------------------------------------------

    private void InitializeButtons()
    {
        if (playButton != null)
        {
            playButton.onClick.AddListener(() => {
                if (SceneLoader.Instance != null) SceneLoader.Instance.LoadScene(GAME_SCENE_NAME);
                else SceneManager.LoadScene(GAME_SCENE_NAME);
            });
        }

        if (settingsButton != null) settingsButton.onClick.AddListener(OpenSettings);

        if (exitButton != null)
        {
            exitButton.onClick.AddListener(() => {
                Application.Quit();
#if UNITY_EDITOR
                UnityEditor.EditorApplication.isPlaying = false;
#endif
            });
        }
    }

    public void OpenSettings()
    {
        Hide();
        if (settingsMenu != null)
        {
            settingsMenu.Open(() => this.Show());
        }
    }

    public void Show()
    {
        if (mainMenuPanel != null)
        {
            mainMenuPanel.alpha = 1;
            mainMenuPanel.interactable = true;
            mainMenuPanel.blocksRaycasts = true;
        }
        gameObject.SetActive(true);
    }

    public void Hide()
    {
        if (mainMenuPanel != null)
        {
            mainMenuPanel.alpha = 0;
            mainMenuPanel.interactable = false;
            mainMenuPanel.blocksRaycasts = false;
        }
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\PauseMenu.cs
================================================================================

using UnityEngine;
using UnityEngine.UI;
using UnityEngine.SceneManagement;

public class PauseMenu : MonoBehaviour
{
    [Header("–°—Å—ã–ª–∫–∏ –Ω–∞ UI")]
    public CanvasGroup pauseMenuPanel;
    public Button resumeButton;
    public Button settingsButton;
    public Button mainMenuButton;

    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏")]
    public SettingsMenu settingsMenu;

    private bool isPaused = false;
    private const string MENU_SCENE_NAME = "MenuScene";

    private void Start()
    {
        InitializeButtons();
        Hide();
        if (settingsMenu != null) settingsMenu.gameObject.SetActive(false);
    }

    private void InitializeButtons()
    {
        if (resumeButton != null) resumeButton.onClick.AddListener(ResumeGame);
        if (settingsButton != null) settingsButton.onClick.AddListener(OpenSettings);
        if (mainMenuButton != null) mainMenuButton.onClick.AddListener(ReturnToMainMenu);
    }

    private void Update()
    {
        // 1. –ï—Å–ª–∏ –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞ (Game Over), –ø–∞—É–∑–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å.
        // GameOverMenu —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ ESC.
        if (GameManager.Instance != null && !GameManager.Instance.IsGameActive)
        {
            return;
        }

        // 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ ESC
        if (Input.GetKeyDown(KeyCode.Escape))
        {
            // –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -> –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏—Ö (Back)
            if (settingsMenu != null && settingsMenu.gameObject.activeSelf)
            {
                settingsMenu.CloseSettings();
            }
            // –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã -> –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –ü–∞—É–∑—É
            else
            {
                TogglePause();
            }
        }
    }

    private void TogglePause()
    {
        if (isPaused) ResumeGame();
        else Show();
    }

    public void Show()
    {
        if (pauseMenuPanel != null)
        {
            pauseMenuPanel.alpha = 1;
            pauseMenuPanel.interactable = true;
            pauseMenuPanel.blocksRaycasts = true;
        }
        PauseGame();
    }

    public void Hide()
    {
        if (pauseMenuPanel != null)
        {
            pauseMenuPanel.alpha = 0;
            pauseMenuPanel.interactable = false;
            pauseMenuPanel.blocksRaycasts = false;
        }
        ResumeGameTime();
    }

    public void ResumeGame()
    {
        Hide();
    }

    public void OpenSettings()
    {
        // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞—É–∑—É –≤–∏–∑—É–∞–ª—å–Ω–æ, –Ω–æ –ª–æ–≥–∏–∫–∞ PauseMenu –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
        if (pauseMenuPanel != null)
        {
            pauseMenuPanel.alpha = 0;
            pauseMenuPanel.interactable = false;
            pauseMenuPanel.blocksRaycasts = false;
        }

        if (settingsMenu != null)
        {
            settingsMenu.Open(() => this.Show());
        }
    }

    private void ReturnToMainMenu()
    {
        ResumeGameTime();
        if (SceneLoader.Instance != null) SceneLoader.Instance.LoadScene(MENU_SCENE_NAME);
        else SceneManager.LoadScene(MENU_SCENE_NAME);
    }

    private void PauseGame()
    {
        Time.timeScale = 0f;
        isPaused = true;
    }

    private void ResumeGameTime()
    {
        Time.timeScale = 1f;
        isPaused = false;
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\SceneLoader.cs
================================================================================

using UnityEngine;
using UnityEngine.SceneManagement;
using UnityEngine.UI;

public class SceneLoader : MonoBehaviour
{
    public static SceneLoader Instance { get; private set; }
    
    [Header("–ó–∞–≥—Ä—É–∑–∫–∞")]
    public GameObject loadingScreen;
    public Slider loadingSlider;
    public Text loadingText;
    
    private void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
            DontDestroyOnLoad(gameObject);
        }
        else
        {
            Destroy(gameObject);
        }
    }
    
    public void LoadScene(string sceneName)
    {
        StartCoroutine(LoadSceneAsync(sceneName));
    }
    
    private System.Collections.IEnumerator LoadSceneAsync(string sceneName)
    {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
        if (loadingScreen != null)
        {
            loadingScreen.SetActive(true);
        }
        
        AsyncOperation operation = SceneManager.LoadSceneAsync(sceneName);
        operation.allowSceneActivation = false;
        
        while (!operation.isDone)
        {
            float progress = Mathf.Clamp01(operation.progress / 0.9f);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI –∑–∞–≥—Ä—É–∑–∫–∏
            if (loadingSlider != null)
            {
                loadingSlider.value = progress;
            }
            
            if (loadingText != null)
            {
                loadingText.text = $"–ó–∞–≥—Ä—É–∑–∫–∞... {progress * 100:F0}%";
            }
            
            if (operation.progress >= 0.9f)
            {
                // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
                yield return new WaitForSeconds(0.5f);
                operation.allowSceneActivation = true;
            }
            
            yield return null;
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
        if (loadingScreen != null)
        {
            loadingScreen.SetActive(false);
        }
    }
    
    public void QuitGame()
    {
        #if UNITY_EDITOR
        UnityEditor.EditorApplication.isPlaying = false;
        #else
        Application.Quit();
        #endif
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\SettingsMenu.cs
================================================================================

using UnityEngine;
using UnityEngine.UI;
using UnityEngine.Audio;

public class SettingsMenu : MonoBehaviour
{
    [Header("Audio Settings")]
    [Tooltip("–ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞ –∞—Å—Å–µ—Ç AudioMixer")]
    public AudioMixer mainMixer;
    public Slider musicSlider;
    public Slider sfxSlider;

    [Header("Screen Settings")]
    public Button fullscreenBtn;
    public Button windowedBtn;

    [Header("Button Visuals")]
    public Image fullscreenBtnImage;
    public Image windowedBtnImage;
    public Sprite activeSprite;
    public Sprite inactiveSprite;

    [Header("Navigation")]
    public Button backButton;

    // –°—é–¥–∞ –º—ã –∑–∞–ø–æ–º–Ω–∏–º –¥–µ–π—Å—Ç–≤–∏–µ "–ö—É–¥–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è"
    private System.Action _onBackCallback;

    private void Awake()
    {
        InitializeSettings();

        // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
        if (musicSlider != null) musicSlider.onValueChanged.AddListener(SetMusicVolume);
        if (sfxSlider != null) sfxSlider.onValueChanged.AddListener(SetSFXVolume);

        if (fullscreenBtn != null) fullscreenBtn.onClick.AddListener(() => SetFullscreen(true));
        if (windowedBtn != null) windowedBtn.onClick.AddListener(() => SetFullscreen(false));

        if (backButton != null) backButton.onClick.AddListener(CloseSettings);

        Hide();
    }

    private void InitializeSettings()
    {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ —Å—Ç–∞–≤–∏–º 0.75 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        float savedMusic = PlayerPrefs.GetFloat("MusicVol", 0.75f);
        float savedSFX = PlayerPrefs.GetFloat("SFXVol", 0.75f);

        if (musicSlider != null) musicSlider.value = savedMusic;
        if (sfxSlider != null) sfxSlider.value = savedSFX;

        bool isFull = PlayerPrefs.GetInt("FullscreenState", Screen.fullScreen ? 1 : 0) == 1;
        SetFullscreen(isFull);
    }

    private void Start()
    {
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –º–∏–∫—à–µ—Ä –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å—Ü–µ–Ω—ã,
        // —Ç–∞–∫ –∫–∞–∫ AudioMixer —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã
        SetMusicVolume(musicSlider.value);
        SetSFXVolume(sfxSlider.value);
    }

    public void SetMusicVolume(float value)
    {
        PlayerPrefs.SetFloat("MusicVol", value);

        // –§–æ—Ä–º—É–ª–∞: Log10(0.0001) * 20 = -80dB (—Ç–∏—à–∏–Ω–∞), Log10(1) * 20 = 0dB (–≥—Ä–æ–º–∫–æ)
        float dB = Mathf.Log10(Mathf.Clamp(value, 0.0001f, 1f)) * 20;

        if (mainMixer != null)
        {
            // SetFloat –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω
            bool result = mainMixer.SetFloat("MusicVol", dB);
            if (!result)
            {
                Debug.LogError("SettingsMenu: –ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä 'MusicVol' –≤ AudioMixer! \n" +
                               "1. –í—ã–¥–µ–ª–∏ –≥—Ä—É–ø–ø—É Music –≤ AudioMixer.\n" +
                               "2. –ü–ö–ú –ø–æ Volume -> Expose.\n" +
                               "3. –í —Å–ø–∏—Å–∫–µ Exposed Parameters –ø–µ—Ä–µ–∏–º–µ–Ω—É–π –µ–≥–æ –≤ 'MusicVol'.");
            }
        }
    }

    public void SetSFXVolume(float value)
    {
        PlayerPrefs.SetFloat("SFXVol", value);

        float dB = Mathf.Log10(Mathf.Clamp(value, 0.0001f, 1f)) * 20;

        if (mainMixer != null)
        {
            bool result = mainMixer.SetFloat("SFXVol", dB);
            if (!result)
            {
                Debug.LogError("SettingsMenu: –ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä 'SFXVol' –≤ AudioMixer! –ü—Ä–æ–≤–µ—Ä—å Exposed Parameters.");
            }
        }
    }

    public void SetFullscreen(bool isFullscreen)
    {
        Screen.fullScreen = isFullscreen;
        PlayerPrefs.SetInt("FullscreenState", isFullscreen ? 1 : 0);
        UpdateScreenButtons(isFullscreen);
    }

    private void UpdateScreenButtons(bool isFullscreen)
    {
        if (activeSprite != null && inactiveSprite != null)
        {
            if (fullscreenBtnImage != null)
                fullscreenBtnImage.sprite = isFullscreen ? activeSprite : inactiveSprite;

            if (windowedBtnImage != null)
                windowedBtnImage.sprite = !isFullscreen ? activeSprite : inactiveSprite;
        }
    }

    // --- –õ–û–ì–ò–ö–ê –û–¢–ö–†–´–¢–ò–Ø ---

    public void Open(System.Action onBackAction)
    {
        _onBackCallback = onBackAction; // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º, –∫—Ç–æ –Ω–∞—Å –ø–æ–∑–≤–∞–ª
        gameObject.SetActive(true);
    }

    public void CloseSettings()
    {
        PlayerPrefs.Save();
        Hide();

        // –í—ã–∑—ã–≤–∞–µ–º –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–µ—Å–ª–∏ –æ–Ω –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω)
        _onBackCallback?.Invoke();
    }

    private void Hide()
    {
        gameObject.SetActive(false);
    }
}

================================================================================
–§–ê–ô–õ: C:\Users\mexanik01\Documents\GameDev\Safe Rabbit\Rabbit\Assets\Sctipts\UI\UIManager.cs
================================================================================

using UnityEngine;

public class UIManager : MonoBehaviour
{
    public static UIManager Instance { get; private set; }
    
    [Header("–ê—É–¥–∏–æ")]
    public AudioSource uiAudioSource;
    public AudioClip buttonClickSound;
    public AudioClip menuOpenSound;
    public AudioClip menuCloseSound;
    
    private void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
            // –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º DontDestroyOnLoad - —É –∫–∞–∂–¥–æ–π —Å—Ü–µ–Ω—ã —Å–≤–æ–π UIManager
        }
    }
    
    public void PlaySound(AudioClip clip)
    {
        if (uiAudioSource != null && clip != null)
        {
            uiAudioSource.PlayOneShot(clip);
        }
    }
    
    // –û–±—â–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö –º–µ–Ω—é
    public void ShowCanvasGroup(CanvasGroup canvasGroup)
    {
        if (canvasGroup != null)
        {
            canvasGroup.alpha = 1;
            canvasGroup.interactable = true;
            canvasGroup.blocksRaycasts = true;
        }
    }
    
    public void HideCanvasGroup(CanvasGroup canvasGroup)
    {
        if (canvasGroup != null)
        {
            canvasGroup.alpha = 0;
            canvasGroup.interactable = false;
            canvasGroup.blocksRaycasts = false;
        }
    }
}
